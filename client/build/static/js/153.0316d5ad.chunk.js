"use strict";(self.webpackChunkforum_sample=self.webpackChunkforum_sample||[]).push([[153],{5683:function(e,n,r){r.r(n),r.d(n,{ClassDetails:function(){return ae}});var t=r(228),i=r(9434),a=r(6871),o=r(1413),s=r(9439),d=r(5987),u=r(478),l=r(2847),c=r(9823),f=r(3811),m=r(4244),p=r(8771),h=r(5953),x=r(9911),Z=r(2791),g=r(1134),v=r(6964),j=r(7341),b=r(8859),y=r(4569),P=r.n(y),w=r(9455),D="".concat(w.LB,"api/v1/groups"),k=r(277),C=r(4565),B=r(6746),S=r(1091),E=(0,k.ZP)(t.Z)((function(e){e.theme;return{display:"flex",justifyContent:"space-between"}})),R=(0,k.ZP)(C.Z)({fontSize:25,fontWeight:500}),I=(0,k.ZP)(t.Z)((function(e){var n=e.theme;return{display:"flex",flex:"1",flexDirection:"column",backgroundColor:n.palette.neutral.light,padding:n.spacing(2),borderRadius:n.spacing(2),marginTop:n.spacing(2)}})),T=((0,k.ZP)(B.Z)((function(e){return{borderRadius:e.theme.spacing(2),".MuiInputBase-inputAdornedEnd":{backgroundColor:"lightgreen",borderTopRightRadius:0,borderBottomRightRadius:0},".MuiInputAdornment-positionEnd":{alignSelf:"stretch",maxHeight:"100%",height:"inherit"}}})),(0,k.ZP)(B.Z)((function(e){return{borderRadius:e.theme.spacing(2),width:"100%",alignSelf:"flex-start"}}))),W=(0,k.ZP)(B.Z)((function(e){return{borderRadius:e.theme.spacing(2),width:"100%"}})),q=(0,k.ZP)(t.Z)((function(e){var n=e.theme;return{marginTop:n.spacing(1),marginBottom:n.spacing(1),display:"flex",flexDirection:"column",gap:n.spacing(1)}})),L=(0,k.ZP)(S.Z)((function(e){var n=e.theme;return{borderRadius:n.spacing(4),backgroundColor:"#8361e8",marginLeft:n.spacing(2),width:"30%",height:"56px"}})),_=r(6571),z=r(9230),A=r(2426),F=r.n(A),G=(r(3528),r(184)),U=["openByDefault","classId","groupId"],V=["ref"],$=["ref"],M=["ref"],O=["ref"],Q=["ref","onBlur","name"],H=["ref","onBlur","name"];function K(e){var n,r,t=e.openByDefault,a=e.classId,y=e.groupId,w=((0,d.Z)(e,U),(0,Z.useState)(!1)),k=(0,s.Z)(w,2),C=k[0],B=k[1],S=(0,Z.useState)(!1),A=(0,s.Z)(S,2),K=A[0],X=A[1],J=(0,Z.useState)(""),N=(0,s.Z)(J,2),Y=N[0],ee=N[1],ne=(0,Z.useState)(""),re=(0,s.Z)(ne,2),te=(re[0],re[1]),ie=(0,Z.useState)(t||!1),ae=(0,s.Z)(ie,2),oe=ae[0],se=ae[1],de=(0,i.v9)((function(e){return e.auth.user.token})),ue=(0,i.I0)(),le=(0,z.$G)().t,ce=(0,g.cI)(),fe=ce.register,me=ce.handleSubmit,pe=ce.formState.errors,he=ce.watch,xe=ce.control,Ze=ce.reset,ge=fe("name",{required:le("addEvent.namerequired"),minLength:{value:2,message:le("addEvent.nametooshort")},maxLength:{value:64,message:le("addEvent.nametoolong")}}),ve=ge.ref,je=(0,d.Z)(ge,V),be=fe("startDate",{required:le("addEvent.timerequired")}),ye=be.ref,Pe=((0,d.Z)(be,$),fe("endDate",{required:le("addEvent.timerequired"),validate:function(e){return F()(e).diff(F()(he("startDate")),"seconds")<0?le("addEvent.endbeforestart"):F()(e).diff(F()(he("startDate")),"days")>0?le("addEvent.sameday"):void 0}})),we=Pe.ref,De=((0,d.Z)(Pe,M),fe("description",{required:le("addEvent.descriptionrequired"),minLength:{value:2,message:le("addEvent.descriptiontooshort")},maxLength:{value:64,message:le("addEvent.descriptiontoolong")}})),ke=De.ref,Ce=(0,d.Z)(De,O),Be=function(e,n){"error"==e?ee(n):X(!0),setTimeout((function(){return"error"==e?ee(""):X(!1)}),2500)};return(0,G.jsx)(Z.Fragment,{children:(0,G.jsxs)(I,{children:[(0,G.jsxs)(E,{children:[(0,G.jsx)(R,{children:le("addEvent.addevent")}),(0,G.jsx)(f.Z,{onClick:function(){return se(!oe)},children:oe?(0,G.jsx)(l.Z,{}):(0,G.jsx)(u.Z,{})})]}),(0,G.jsxs)(m.Z,{in:oe,children:[(0,G.jsx)(m.Z,{in:K||Y,children:(0,G.jsx)(p.Z,{severity:Y?"error":"success",action:(0,G.jsx)(f.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){Y?ee(!1):X(!1)},children:(0,G.jsx)(c.Z,{fontSize:"inherit"})}),children:K?le("addEvent.success"):Y})}),(0,G.jsx)(q,{component:"form",onSubmit:me((function(e){ee(""),X(!1),B(!0),function(e,n,r,t,i,a){return P().post("".concat(D,"/").concat(t,"/events"),{title:e,startDate:n,endDate:r,classId:i},{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return Promise.resolve(e.data.data)}),(function(e){var n=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return Promise.reject(n)}))}(e.name,F()(e.startDate).format("x"),F()(e.endDate).format("x"),y,a,de).then((function(){Be("success"),te("https://blabla.com/invite/322-bfdda-sgaw"),ue((0,v.KX)(de)),Ze()})).catch((function(e){X(!1),Be("error",e)})).finally((function(){return B(!1)}))})),noValidate:!0,children:(0,G.jsxs)(h.ZP,{container:!0,spacing:1,rows:12,children:[(0,G.jsx)(h.ZP,{item:!0,xs:12,sm:12,md:4,lg:4,xl:4,children:(0,G.jsx)(T,(0,o.Z)((0,o.Z)({sx:{flex:2},margin:"normal",required:!0,fullWidth:!0,name:"name",id:"name",placeholder:le("addEvent.name"),inputRef:ve},je),{},{error:!!pe.name,helperText:null===pe||void 0===pe||null===(n=pe.name)||void 0===n?void 0:n.message}))}),(0,G.jsx)(h.ZP,{item:!0,xs:12,sm:12,md:4,lg:4,xl:4,children:(0,G.jsx)(_._,{dateAdapter:j.Z,children:(0,G.jsx)(g.Qr,{control:xe,defaultValue:F()(),name:"startDate",render:function(e){var n=e.field,r=(n.ref,n.onBlur),t=n.name,i=(0,d.Z)(n,Q);e.fieldState;return(0,G.jsx)(b.x,(0,o.Z)((0,o.Z)({},i),{},{inputRef:ye,label:le("addEvent.date-from"),renderInput:function(e){var n;return(0,G.jsx)(x.Z,(0,o.Z)((0,o.Z)({},e),{},{onBlur:r,fullWidth:!0,name:t,error:!!pe.startDate,helperText:null===(n=pe.startDate)||void 0===n?void 0:n.message}))}}))}})})}),(0,G.jsx)(h.ZP,{item:!0,xs:12,sm:12,md:4,lg:4,xl:4,children:(0,G.jsx)(_._,{dateAdapter:j.Z,children:(0,G.jsx)(g.Qr,{control:xe,defaultValue:F()().add(1,"hour"),name:"endDate",render:function(e){var n=e.field,r=(n.ref,n.onBlur),t=n.name,i=(0,d.Z)(n,H),a=e.fieldState;return(0,G.jsx)(b.x,(0,o.Z)((0,o.Z)({},i),{},{inputRef:we,label:le("addEvent.date-to"),renderInput:function(e){var n;return(0,G.jsx)(x.Z,(0,o.Z)((0,o.Z)({},e),{},{onBlur:r,fullWidth:!0,name:t,error:!!a.error,helperText:null===(n=pe.endDate)||void 0===n?void 0:n.message}))}}))}})})}),(0,G.jsx)(h.ZP,{item:!0,xs:12,children:(0,G.jsx)(W,(0,o.Z)((0,o.Z)({margin:"normal",required:!0,multiline:!0,rows:3,fullWidth:!0,name:"name",id:"name",placeholder:le("addEvent.description"),inputRef:ke},Ce),{},{error:!!pe.description,helperText:null===pe||void 0===pe||null===(r=pe.description)||void 0===r?void 0:r.message}))}),(0,G.jsx)(h.ZP,{item:!0,xs:12,display:"flex",justifyContent:"flex-end",children:(0,G.jsx)(L,{type:"submit",fullWidth:!0,variant:"contained",disabled:C,disableElevation:!0,children:le("addEvent.submit")})})]})})]})]})})}var X=r(5931),J=r.n(X),N=(r(8022),r(3453)),Y=(0,k.ZP)(t.Z)((function(e){e.theme;return{display:"flex",justifyContent:"space-between"}})),ee=(0,k.ZP)(C.Z)({fontSize:25,fontWeight:500}),ne=(0,k.ZP)(t.Z)((function(e){var n=e.theme;return{display:"flex",flex:"1",flexDirection:"column",backgroundColor:n.palette.neutral.light,padding:n.spacing(2),borderRadius:n.spacing(2),marginTop:n.spacing(2)}})),re=((0,k.ZP)(t.Z)((function(e){return{marginTop:e.theme.spacing(1),display:"flex"}})),(0,k.ZP)(B.Z)((function(e){return{borderRadius:e.theme.spacing(2),width:"70%"}})),(0,k.ZP)(S.Z)((function(e){var n=e.theme;return{borderRadius:n.spacing(4),backgroundColor:"#8361e8",marginLeft:n.spacing(2),width:"30%"}})),["openByDefault"]),te=function(e){var n=e.openByDefault,r=((0,d.Z)(e,re),(0,Z.useState)(n||!1)),t=(0,s.Z)(r,2),o=t[0],c=t[1],p=(0,a.UO)().id,h=(0,i.I0)(),x=(0,z.$G)().t,g=(0,i.v9)((function(e){return e.auth.user.token})),v=(0,i.v9)((function(e){return e.workgroups.currentWorkgroup}));return(0,G.jsxs)(ne,{children:[(0,G.jsxs)(Y,{children:[(0,G.jsx)(ee,{children:x("uploadFiles.uploadfile")}),(0,G.jsx)(f.Z,{onClick:function(){return c(!o)},children:o?(0,G.jsx)(l.Z,{}):(0,G.jsx)(u.Z,{})})]}),(0,G.jsx)(m.Z,{in:o,children:(0,G.jsx)(J(),{inputContent:x("uploadFiles.dropzonetext"),getUploadParams:function(e){e.meta;return{url:"".concat(w.LB,"api/v1/classes/").concat(p),headers:{Authorization:"Bearer ".concat(g)}}},onChangeStatus:function(e,n){var r=e.meta,t=e.file;console.log(n,r,t)},onSubmit:function(e,n){n.map((function(e){return e.remove()})),h((0,N.k)(v._id,g))},accept:"image/*,audio/*,video/*,.pdf"})})]})},ie=r(276),ae=function(){var e,n,r=(0,a.UO)().id,o=null===(e=(0,i.v9)((function(e){return e.workgroups.currentWorkgroup})))||void 0===e?void 0:e._id,s=null===(n=(0,i.v9)((function(e){var n,t;return null===(n=e.classes)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.find((function(e){return e._id==r}))})))||void 0===n?void 0:n.documents;return(0,G.jsxs)(t.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,G.jsx)(t.Z,{children:(0,G.jsx)(ie.r,{openByDefault:!0,files:s})}),(0,G.jsx)(t.Z,{children:(0,G.jsx)(te,{})},r),(0,G.jsx)(t.Z,{children:(0,G.jsx)(K,{classId:r,groupId:o,openByDefault:!0})})]})}},276:function(e,n,r){r.d(n,{r:function(){return S}});var t=r(9439),i=r(5987),a=r(3811),o=r(4244),s=r(5629),d=r(2087),u=r(9562),l=r(3423),c=r(4346),f=r(4565),m=r(3717),p=r(9434),h=r(277),x=r(228),Z=r(6746),g=r(1091),v=(0,h.ZP)(x.Z)((function(e){e.theme;return{display:"flex",justifyContent:"space-between"}})),j=(0,h.ZP)(f.Z)({fontSize:25,fontWeight:500}),b=(0,h.ZP)(x.Z)((function(e){var n=e.theme;return{display:"flex",flex:"1",flexDirection:"column",backgroundColor:n.palette.neutral.light,padding:n.spacing(2),borderRadius:n.spacing(2),marginTop:n.spacing(2)}})),y=((0,h.ZP)(x.Z)((function(e){return{marginTop:e.theme.spacing(1),display:"flex"}})),(0,h.ZP)(Z.Z)((function(e){return{borderRadius:e.theme.spacing(2),width:"70%"}})),(0,h.ZP)(g.Z)((function(e){var n=e.theme;return{borderRadius:n.spacing(4),backgroundColor:"#8361e8",marginLeft:n.spacing(2),width:"30%"}})),r(2791)),P=r(478),w=r(2847),D=r(3518),k=r(9230),C=r(184),B=["id","files","openByDefault","name"],S=function(e){e.id;var n=e.files,r=e.openByDefault,h=e.name,x=((0,i.Z)(e,B),(0,p.v9)((function(e){return e.workgroups.currentWorkgroup}))),Z=(0,k.$G)().t,g=(0,y.useState)(r||!1),S=(0,t.Z)(g,2),E=S[0],R=S[1];return(0,C.jsxs)(b,{children:[(0,C.jsxs)(v,{children:[(0,C.jsx)(j,{color:"text.primary",children:"".concat(Z("viewClassFiles.shared")," ").concat((null===h||void 0===h?void 0:h.toLowerCase())||Z("viewClassFiles.files"))}),(0,C.jsx)(a.Z,{onClick:function(){return R(!E)},children:E?(0,C.jsx)(w.Z,{}):(0,C.jsx)(P.Z,{})})]}),(0,C.jsx)(o.Z,{in:E,children:(0,C.jsx)(s.Z,{sx:{"max-height":"30vh",overflow:"auto"},dense:!0,children:null===n||void 0===n?void 0:n.map((function(e){var n;return(0,C.jsxs)(d.ZP,{secondaryAction:(0,C.jsx)(a.Z,{edge:"start","aria-label":"download",sx:{marginRight:2},children:(0,C.jsx)(D.Z,{})}),children:[(0,C.jsx)(u.Z,{children:(0,C.jsx)(l.Z,{src:"".concat("https://studentshare.s3.eu-west-2.amazonaws.com","/").concat(e.file_key),children:(0,C.jsx)(m.Z,{})})}),(0,C.jsx)(c.Z,{primary:(0,C.jsx)(f.Z,{color:"text.primary",children:e.file_name}),secondary:(0,C.jsx)(f.Z,{color:"text.secondary",children:Array.isArray(x.members)?null===(n=x.members)||void 0===n?void 0:n.find((function(n){return n._id==e.userId})).name:"unknown"})})]})}))})})]})}}}]);
//# sourceMappingURL=153.0316d5ad.chunk.js.map