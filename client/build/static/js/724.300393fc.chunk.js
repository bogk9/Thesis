"use strict";(self.webpackChunkforum_sample=self.webpackChunkforum_sample||[]).push([[724],{724:function(e,r,s){s.r(r),s.d(r,{Profile:function(){return I}});var n=s(1413),a=s(5987),i=s(9439),o=s(4244),t=s(8771),l=s(3811),d=s(3423),m=s(1091),u=s(1872),c=s(9276),f=s(2791),h=s(1134),x=s(9434),p=s(6871),w=s(2687),g=s(4569),Z=s.n(g),v=s(9455),j="".concat(v.LB,"api/v1/users"),P=s(277),b=s(4565),y=s(228),C=s(6746),q=(0,P.ZP)(b.Z)({fontSize:25,fontWeight:700}),S=(0,P.ZP)(b.Z)({fontSize:16,fontWeight:700}),L=(0,P.ZP)(y.Z)((function(e){var r=e.theme;return{display:"flex",flex:"1",flexDirection:"column",backgroundColor:r.palette.neutral.main,padding:r.spacing(2),borderRadius:r.spacing(2),marginTop:r.spacing(2)}})),N=(0,P.ZP)(C.Z)((function(e){return{borderRadius:e.theme.spacing(1)}})),k=s(9823),R=s(184),z=["ref"],E=["ref"],W=["ref"],T=["ref"],D=["ref"],I=function(){(0,p.UO)().id;var e,r,s,g,v,P=(0,x.I0)(),b=(0,f.useState)(!1),y=(0,i.Z)(b,2),C=(y[0],y[1],(0,f.useState)(!1)),I=(0,i.Z)(C,2),O=I[0],A=I[1],B=(0,f.useState)(""),U=(0,i.Z)(B,2),_=U[0],M=U[1],V=(0,f.useState)(!1),F=(0,i.Z)(V,2),G=F[0],H=F[1],J=(0,f.useState)(!1),K=(0,i.Z)(J,2),Q=K[0],X=K[1],Y=(0,x.v9)((function(e){return e.auth.user})),$=(0,h.cI)(),ee=$.register,re=$.handleSubmit,se=$.formState.errors,ne=($.watch,$.reset),ae=ee("name",{required:"Name is required!",minLength:{value:2,message:"Name is too short"},maxLength:{value:64,message:"Name is too long"}}),ie=ae.ref,oe=(0,a.Z)(ae,z),te=ee("email",{required:"Email is required!",minLength:{value:2,message:"Email is too short"},maxLength:{value:64,message:"Email is too long"}}),le=te.ref,de=(0,a.Z)(te,E),me=ee("oldPassword",O&&{required:"Old password is required!",minLength:{value:2,message:"Old password is too short"},maxLength:{value:64,message:"Old pasword is too long"}}),ue=me.ref,ce=(0,a.Z)(me,W),fe=ee("newPassword",O&&{required:"New password is required!",minLength:{value:2,message:"New password is too short"},maxLength:{value:64,message:"New pasword is too long"}}),he=fe.ref,xe=(0,a.Z)(fe,T),pe=ee("newPasswordConfirm",O&&{required:"New password is required!",minLength:{value:2,message:"New password is too short"},maxLength:{value:64,message:"New pasword is too long"}}),we=pe.ref,ge=(0,a.Z)(pe,D),Ze=function(e,r,s,n){return new Promise((function(a,i){(function(e,r,s,n){return Z().patch("".concat(j,"/update-password"),{passwordCurrent:e,password:r,passwordConfirm:s},{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){return Promise.resolve(e.data.data)}),(function(e){var r=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return Promise.reject(r)}))})(e,r,s,n).then((function(){P((0,w.x4)(Y.email,r)),A(!1),a()})).catch((function(e){return i(e)}))}))},ve=function(e,r,s){return new Promise((function(n,a){(function(e,r,s){return Z().patch("".concat(j,"/update-me"),{name:e,email:r},{headers:{Authorization:"Bearer ".concat(s)}}).then((function(e){return Promise.resolve(e.data.data)}),(function(e){var r=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();return Promise.reject(r)}))})(e,r,s).then((function(e){P((0,w.Al)(e.user)),n()})).catch((function(e){return a(e)}))}))};return(0,f.useEffect)((function(){!function(){var e={};e.name=Y.name,e.email=Y.email,ne((0,n.Z)((0,n.Z)({},e),{},{oldPassword:"",newPassword:"",newPasswordConfirm:""}))}()}),[Y]),(0,R.jsxs)(L,{sx:{paddingLeft:3},component:"form",onSubmit:re((function(e){H(!0),X(!1),M("");(O?Ze(e.oldPassword,e.newPassword,e.newPasswordConfirm,Y.token):ve(e.name,e.email,Y.token)).then((function(){X(!0)})).catch((function(e){M(e),X(!1)})).finally((function(){return H(!1)}))})),noValidate:!0,children:[(0,R.jsx)(o.Z,{in:Q||_,children:(0,R.jsx)(t.Z,{severity:_?"error":"success",action:(0,R.jsx)(l.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){_?M(!1):X(!1)},children:(0,R.jsx)(k.Z,{fontSize:"inherit"})}),children:Q?"Successfully changed data.":_})}),(0,R.jsx)(q,{children:"Profile"}),(0,R.jsxs)(c.Z,{mt:2,mb:3,children:[(0,R.jsx)(S,{children:"Avatar"}),(0,R.jsxs)(c.Z,{mt:1,sx:{display:"flex",alignItems:"center"},children:[(0,R.jsx)(d.Z,{sx:{height:58,width:58},alt:Y.name,src:"/static/images/avatar/1.jpg"}),(0,R.jsx)(m.Z,{sx:{marginLeft:2},variant:"outlined",color:"primary",children:"Upload"}),(0,R.jsx)(m.Z,{sx:{marginLeft:2},variant:"outlined",color:"secondary",children:"Remove"})]})]}),(0,R.jsx)(u.Z,{}),(0,R.jsxs)(c.Z,{sx:{display:"flex"},mt:2,mb:3,children:[(0,R.jsxs)(c.Z,{mr:.5,sx:{width:"50%"},children:[(0,R.jsx)(S,{children:"Username"}),(0,R.jsx)(N,(0,n.Z)((0,n.Z)({fullWidth:!0,margin:"normal",required:!0,name:"name",id:"name",placeholder:"Name",inputRef:ie,disabled:O},oe),{},{error:!!se.name,helperText:null===se||void 0===se||null===(e=se.name)||void 0===e?void 0:e.message}))]}),(0,R.jsxs)(c.Z,{ml:.5,sx:{width:"50%"},children:[(0,R.jsx)(S,{children:"E-mail"}),(0,R.jsx)(N,(0,n.Z)((0,n.Z)({fullWidth:!0,margin:"normal",required:!0,name:"email",id:"email",placeholder:"Email",inputRef:le,disabled:O},de),{},{error:!!se.email,helperText:null===se||void 0===se||null===(r=se.email)||void 0===r?void 0:r.message}))]})]}),(0,R.jsx)(u.Z,{}),(0,R.jsxs)(c.Z,{mt:2,mb:2,sx:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,R.jsx)(S,{sx:{mb:2},children:"Password"}),(0,R.jsx)(m.Z,{variant:"outlined",color:"primary",onClick:function(){return A(!0)},children:"Change password"}),(0,R.jsxs)(o.Z,{in:O,sx:{width:"50%"},children:[(0,R.jsx)(c.Z,{mt:2,children:(0,R.jsx)(N,(0,n.Z)((0,n.Z)({fullWidth:!0,margin:"normal",required:!0,name:"oldPassword",id:"oldPasssword",type:"password",placeholder:"Old password",inputRef:ue},ce),{},{error:!!se.oldPassword,helperText:null===se||void 0===se||null===(s=se.oldPassword)||void 0===s?void 0:s.message}))}),(0,R.jsx)(c.Z,{mt:1,mb:1,children:(0,R.jsx)(N,(0,n.Z)((0,n.Z)({fullWidth:!0,margin:"normal",required:!0,name:"newPassword",id:"newPassword",type:"password",placeholder:"New password",inputRef:he},xe),{},{error:!!se.newPassword,helperText:null===se||void 0===se||null===(g=se.newPassword)||void 0===g?void 0:g.message}))}),(0,R.jsx)(c.Z,{mt:1,mb:1,children:(0,R.jsx)(N,(0,n.Z)((0,n.Z)({fullWidth:!0,margin:"normal",required:!0,name:"newPasswordConfirm",id:"newPasswordConfirm",type:"password",placeholder:"New password (confirm)",inputRef:we},ge),{},{error:!!se.newPasswordConfirm,helperText:null===se||void 0===se||null===(v=se.newPasswordConfirm)||void 0===v?void 0:v.message}))})]})]}),(0,R.jsx)(u.Z,{}),(0,R.jsxs)(c.Z,{mt:2,mb:2,sx:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[(0,R.jsx)(S,{sx:{mb:2},children:"Danger area"}),(0,R.jsx)(m.Z,{variant:"outlined",color:"warning",children:"Delete account"})]}),(0,R.jsx)(u.Z,{}),(0,R.jsx)(c.Z,{mt:2,mb:1,sx:{display:"flex",justifyContent:"flex-end"},children:(0,R.jsx)(m.Z,{type:"submit",disabled:G,disableElevation:!0,variant:"contained",color:"primary",children:"Save changes"})})]})}},9823:function(e,r,s){var n=s(4836);r.Z=void 0;var a=n(s(5649)),i=s(184),o=(0,a.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");r.Z=o}}]);
//# sourceMappingURL=724.300393fc.chunk.js.map